<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¶‡ßà‡¶®‡¶®‡ßç‡¶¶‡¶ø‡¶® ‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
/* ===== Theme (Spotify-like dark) ===== */
:root{
  --bg:#0f1115; --bg-accent:#0b0f14; --card:#151823; --card-2:#1a1f2b;
  --text:#e8ecf3; --muted:#9aa6b2; --border:rgba(255,255,255,.07);
  --ring:#3b82f6; --ring-soft:rgba(59,130,246,.35);
  --green:#22c55e; --green-2:#16a34a; --red:#ef4444; --blue:#2563eb;
  --purple:#7c3aed; --yellow:#f59e0b;
}
*{box-sizing:border-box}
body{
  margin:0; font-family:"Noto Sans Bengali",system-ui,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background: radial-gradient(1000px 600px at -10% -10%, #1f2937 0%, transparent 60%),
              radial-gradient(900px 700px at 110% 10%, #111827 0%, transparent 60%),
              var(--bg);
}
.wrap{max-width:1000px;margin:0 auto;padding:24px 16px 100px}
.header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:16px}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:42px;height:42px;border-radius:12px;background:linear-gradient(135deg,var(--green),var(--green-2));display:grid;place-items:center;font-weight:800;color:#04120b;box-shadow:0 16px 36px rgba(34,197,94,.35);}
h1{margin:0;font-size:clamp(18px,3.8vw,26px)}
.sub{margin-top:4px;color:var(--muted);font-size:14px}
.card{background:linear-gradient(180deg,rgba(255,255,255,.03),transparent 40%),var(--card);border:1px solid var(--border);border-radius:16px;padding:14px 16px;margin-bottom:14px;box-shadow:0 10px 26px rgba(0,0,0,.35);}
.topbar{display:flex;align-items:center;gap:10px;margin-bottom:14px}
.clock{padding:8px 12px;border-radius:12px;background:linear-gradient(135deg,var(--purple),#9f67ff);color:#fff;font-weight:800;letter-spacing:.3px;min-width:150px;text-align:center;box-shadow:0 10px 26px rgba(124,58,237,.35);}
.btn{cursor:pointer;border:none;border-radius:12px;padding:10px 14px;font-weight:800;letter-spacing:.2px;background:linear-gradient(135deg,var(--green),#86efac);color:#04120b;box-shadow:0 12px 26px rgba(34,197,94,.25);transition:.15s}
.btn.secondary{background:linear-gradient(135deg,var(--blue),#93c5fd);color:#061224}
.btn.danger{background:linear-gradient(135deg,var(--red),#fca5a5);color:#2a0a0a}
.btn:hover{filter:saturate(1.06)}
.tabs{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0}
.tab{background:var(--card-2);color:#dbe7ff;border:1px solid var(--border);padding:8px 12px;border-radius:999px;cursor:pointer;font-weight:700}
.tab.active{background:linear-gradient(135deg,var(--blue),#60a5fa);color:#081221;border:none}
.tab.add{background:transparent;color:var(--muted)}
.form-row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.input{flex:1 1 280px;min-width:220px;background:var(--bg-accent);color:var(--text);border:1px solid var(--border);border-radius:12px;padding:12px 14px;font-size:15px}
.chip{background:var(--card-2);border:1px solid var(--border);padding:8px 10px;border-radius:10px;color:var(--muted)}
.num{width:40px}
.hint{font-size:12px;color:var(--muted);margin-top:6px}
.task{display:grid;grid-template-columns:auto 1fr auto auto;gap:10px;align-items:center;background:linear-gradient(180deg,rgba(255,255,255,.02),transparent 50%),var(--card);border:1px solid var(--border);border-radius:14px;padding:10px 12px;margin-bottom:10px}
.title{font-weight:700}
.title.done{opacity:.65;text-decoration:line-through}
.date{font-size:12px;color:var(--muted)}
.pill{padding:6px 10px;border-radius:999px;font-weight:800;font-size:12px}
.pill.warn{background:linear-gradient(135deg,#f59e0b,#fde68a);color:#221a04}
.iconbtn{border:1px solid var(--border);background:var(--card-2);color:#e7eefc;border-radius:10px;padding:7px 10px;cursor:pointer;font-weight:800}
.iconbtn.danger{background:linear-gradient(135deg,#ef4444,#fda4af);color:#2a0a0a;border:none}
.empty{color:var(--muted);text-align:center;padding:16px}
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="module">
import React,{useEffect,useState} from 'https://esm.sh/react@18.3.1';
import { createRoot } from 'https://esm.sh/react-dom@18.3.1/client';
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth,onAuthStateChanged,GoogleAuthProvider,signInWithPopup,signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore,collection,addDoc,doc,deleteDoc,updateDoc,onSnapshot,query,orderBy,serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

/* Firebase Config */
const firebaseConfig={apiKey:"AIzaSyAyZE7srt9ODVr4umkqqzn7mmgCURM4vLA",authDomain:"to-do-list-fdcf2.firebaseapp.com",databaseURL:"https://to-do-list-fdcf2-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"to-do-list-fdcf2",storageBucket:"to-do-list-fdcf2.appspot.com",messagingSenderId:"851462607587",appId:"1:851462607587:web:3b82f5fe257a0b60b22bd6",measurementId:"G-P8K1QBKMX6"};
const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

/* Audio Reminder */
let audioCtx=null;
function ensureAudio(){ if(!audioCtx){ audioCtx=new (window.AudioContext||window.webkitAudioContext)(); } }
function playReminderTone(){ try{ ensureAudio(); const ctx=audioCtx; if(!ctx)return; const now=ctx.currentTime+0.05; const gain=ctx.createGain(); gain.connect(ctx.destination); const notes=[{f:523.25,d:0.2},{f:659.25,d:0.18},{f:783.99,d:0.22},{f:1046.5,d:0.3}]; let t=now; notes.forEach(n=>{const o=ctx.createOscillator();o.type='sine';o.frequency.setValueAtTime(n.f,t);o.connect(gain);o.start(t);o.stop(t+n.d+0.02);t+=n.d*0.9}); }catch(e){} }
function scheduleLocalReminder(title,delayMs){ if(delayMs==null)return; ensureAudio(); setTimeout(()=>{ playReminderTone(); if("Notification"in window){ if(Notification.permission==="granted"){ new Notification("üîî ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞",{body:"‡¶Æ‡¶®‡ßá ‡¶ï‡¶∞: "+title}); }else{ Notification.requestPermission().then(p=>{ if(p==="granted") new Notification("üîî ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞",{body:"‡¶Æ‡¶®‡ßá ‡¶ï‡¶∞: "+title}); }); } } },delayMs); }

/* Components */
function Clock(){ const [now,setNow]=useState(new Date()); useEffect(()=>{const t=setInterval(()=>setNow(new Date()),1000); return ()=>clearInterval(t)},[]); const str=new Intl.DateTimeFormat('bn-BD',{hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:true}).format(now); return React.createElement('div',{className:'clock'},str); }

function Header({user,onSignIn,onSignOut}){ return React.createElement('div',{className:'header'}, React.createElement('div',{className:'brand'}, React.createElement('div',{className:'logo'},''), React.createElement('div',null,React.createElement('h1',null,'‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¶‡ßà‡¶®‡¶®‡ßç‡¶¶‡¶ø‡¶® ‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ'), React.createElement('div',{className:'sub'},''))), user?React.createElement('button',{className:'btn danger',onClick:onSignOut},'Sign Out'):React.createElement('button',{className:'btn',onClick:onSignIn},'Google ‡¶¶‡¶ø‡ßü‡ßá ‡¶∏‡¶æ‡¶á‡¶® ‡¶á‡¶®')); }

function TopBar(){ return React.createElement('div',{className:'topbar'},React.createElement(Clock)); }

function Tabs({lists,active,onSelect,onAdd}){ return React.createElement('div',{className:'tabs'}, lists.map(l=>React.createElement('button',{key:l.id,className:'tab'+(active===l.id?' active':''),onClick:()=>onSelect(l.id)},l.name)), React.createElement('button',{className:'tab add',onClick:onAdd},'+ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü')); }

function AddTask({onAdd}){ const [title,setTitle]=useState(''); const [rem,setRem]=useState(false); const [h,setH]=useState(''); const [m,setM]=useState(''); const [s,setS]=useState(''); const submit=e=>{e.preventDefault(); const t=title.trim(); if(!t)return; let d=null; if(rem){const hh=parseInt(h||'0')||0;const mm=parseInt(m||'0')||0;const ss=parseInt(s||'0')||0;d=(hh*3600+mm*60+ss)*1000;if(d<=0)d=null;} onAdd({title:t,delayMs:d}); setTitle('');setRem(false);setH('');setM('');setS('');}; return React.createElement('form',{onSubmit:submit,className:'card'}, React.createElement('div',{className:'form-row'},React.createElement('input',{className:'input',type:'text',value:title,placeholder:'‡¶ï‡¶æ‡¶ú ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‚Ä¶',onChange:e=>setTitle(e.target.value)}), React.createElement('button',{className:'btn secondary',type:'submit'},'Add')), React.createElement('div',{className:'form-row'}, React.createElement('label',{className:'chip'},React.createElement('input',{type:'checkbox',checked:rem,onChange:e=>setRem(e.target.checked)}),' ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞'), React.createElement('input',{className:'input num',type:'number',min:'0',placeholder:'‡¶ò‡¶®‡ßç‡¶ü‡¶æ',value:h,onChange:e=>setH(e.target.value),disabled:!rem}), React.createElement('input',{className:'input num',type:'number',min:'0',placeholder:'‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü',value:m,onChange:e=>setM(e.target.value),disabled:!rem}), React.createElement('input',{className:'input num',type:'number',min:'0',placeholder:'‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°',value:s,onChange:e=>setS(e.target.value),disabled:!rem})), React.createElement('div',{className:'hint'}, rem?'‡¶∏‡¶Æ‡ßü ‡¶π‡¶≤‡ßá ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® + ‡¶ü‡ßã‡¶® ‡¶¨‡¶æ‡¶ú‡¶¨‡ßá':'‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶á‡¶≤‡ßá ‡¶ü‡¶ø‡¶ï ‡¶¶‡¶ø‡¶®')); }

function TaskList({tasks,onToggle,onDelete}){ const fmt=ts=>ts?new Intl.DateTimeFormat('bn-BD',{dateStyle:'medium'}).format(ts.toDate()):''; if(!tasks.length)return React.createElement('div',{className:'card empty'},'‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶æ‡¶ú ‡¶®‡ßá‡¶á'); return React.createElement('div',null, tasks.map(t=>React.createElement('div',{key:t.id,className:'task'}, React.createElement('input',{type:'checkbox',checked:t.completed,onChange:()=>onToggle(t)}), React.createElement('div',null,React.createElement('div',{className:'title '+(t.completed?'done':'')},t.title),React.createElement('div',{className:'date'},fmt(t.createdAt),t.reminderAt?' ¬∑ üîî':'')), t.reminderAt?React.createElement('span',{className:'pill warn'},'REMINDER'):React.createElement('span',{className:'pill'},t.completed?'DONE':'NEW'), React.createElement('button',{className:'iconbtn danger',onClick:()=>onDelete(t)},'Delete')))); }

/* Main App */
function App(){ const [user,setUser]=useState(null); const [lists,setLists]=useState([]); const [active,setActive]=useState(null); const [tasks,setTasks]=useState([]); useEffect(()=>onAuthStateChanged(auth,u=>setUser(u)),[]); useEffect(()=>{if(user){const unsub=onSnapshot(collection(db,'users',user.uid,'lists'),snap=>{const arr=snap.docs.map(d=>({id:d.id,...d.data()}));setLists(arr);if(!active&&arr.length)setActive(arr[0].id)});return unsub}},[user]); useEffect(()=>{if(user&&active){const q=query(collection(db,'users',user.uid,'lists',active,'tasks'),orderBy('createdAt','desc'));const unsub=onSnapshot(q,snap=>setTasks(snap.docs.map(d=>({id:d.id,...d.data()}))));return unsub}},[user,active]); const signIn=()=>signInWithPopup(auth,new GoogleAuthProvider()); const signOutNow=()=>signOut(auth); const addList=async()=>{const name=prompt('‡¶≤‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶¶‡¶ø‡¶®'); if(name&&user){await addDoc(collection(db,'users',user.uid,'lists'),{name});}}; const addTask=async({title,delayMs})=>{if(user&&active){const data={title,completed:false,createdAt:serverTimestamp()}; if(delayMs){data.reminderAt=new Date(Date.now()+delayMs).toISOString();} await addDoc(collection(db,'users',user.uid,'lists',active,'tasks'),data); if(delayMs){scheduleLocalReminder(title,delayMs);} }}; const toggleTask=t=>updateDoc(doc(db,'users',user.uid,'lists',active,'tasks',t.id),{completed:!t.completed}); const delTask=t=>deleteDoc(doc(db,'users',user.uid,'lists',active,'tasks',t.id)); return React.createElement('div',{className:'wrap'}, React.createElement(Header,{user,onSignIn:signIn,onSignOut:signOutNow}), React.createElement(TopBar), user&&React.createElement(Tabs,{lists,active,onSelect:setActive,onAdd:addList}), user&&active&&React.createElement(AddTask,{onAdd:addTask}), user&&active&&React.createElement(TaskList,{tasks,onToggle:toggleTask,onDelete:delTask})); }

createRoot(document.getElementById('root')).render(React.createElement(App));
  </script>
</body>
</html>
